# fxrc @ popos in ~/Downloads [22:43:24] C:1
$ kubectl logs my-app-8486b5cf9b-cxdvb
Microservices rock: undefined
Microservices rock: undefined
Microservices rock: undefined
(base) 
# fxrc @ popos in ~/Downloads [22:44:16] 
$ kubectl get deploy my-app               
NAME     READY   UP-TO-DATE   AVAILABLE   AGE
my-app   2/2     2            2           3m38s
(base) 
# fxrc @ popos in ~/Downloads [22:44:43] 
$ kubectl exec -it my-app-8486b5cf9b-cxdvb sh
kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.
# pwd
/usr/src/app
# ll
sh: 2: ll: not found
# ls
Dockerfile  README.md  package-lock.json  package.json  server.js
# vi server.js
sh: 4: vi: not found
# cat server.js
const favoritefood = process.env.FAVORITE_FOOD;

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function main() {
  while(true) {
    console.log(`Microservices rock: ${favoritefood}`);
    await sleep(5000);
  }
}

main();
# ps aux
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           1  0.1  0.1 589108 29272 ?        Ssl  06:44   0:00 node server.js
root          15  0.0  0.0   4284   756 pts/0    Ss   06:45   0:00 sh
root          24  0.0  0.0  36640  2908 pts/0    R+   06:45   0:00 ps aux
# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
3: eth0@if49: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1450 qdisc noqueue state UP group default 
    link/ether 52:d5:e6:b1:4d:94 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 10.42.0.7/24 brd 10.42.0.255 scope global eth0
       valid_lft forever preferred_lft forever
# exit
(base) 
# fxrc @ popos in ~/Downloads [22:46:06] 
$ kubectl describe po my-app-8486b5cf9b-l42k7 
Name:         my-app-8486b5cf9b-l42k7
Namespace:    default
Priority:     0
Node:         popos/192.168.1.228
Start Time:   Thu, 04 Mar 2021 22:41:06 -0800
Labels:       app=my-app
              pod-template-hash=8486b5cf9b
Annotations:  <none>
Status:       Running
IP:           10.42.0.8
IPs:
  IP:           10.42.0.8
Controlled By:  ReplicaSet/my-app-8486b5cf9b
Containers:
  simple-node:
    Container ID:   docker://959e9e7c25c59de012aafd36e69069f763f64df90e71b4fee97ec95a14bd42a8
    Image:          mathson/simple-node
    Image ID:       docker-pullable://mathson/simple-node@sha256:2b150fa962b2b476ca40a5ab7063ea38654376800ed12fdf29c808eaacee2842
    Port:           80/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Thu, 04 Mar 2021 22:44:02 -0800
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-rwpnw (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-rwpnw:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-rwpnw
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From            Message
  ----    ------     ----   ----            -------
  Normal  Scheduled  5m16s                  Successfully assigned default/my-app-8486b5cf9b-l42k7 to popos
  Normal  Pulling    5m15s  kubelet, popos  Pulling image "mathson/simple-node"
  Normal  Pulled     2m20s  kubelet, popos  Successfully pulled image "mathson/simple-node" in 2m55.480243612s
  Normal  Created    2m20s  kubelet, popos  Created container simple-node
  Normal  Started    2m20s  kubelet, popos  Started container simple-node
(base) 
# fxrc @ popos in ~/Downloads [22:46:25]

# fxrc @ popos in ~/Downloads [22:43:24] C:1
$ kubectl logs my-app-8486b5cf9b-cxdvb
Microservices rock: undefined
Microservices rock: undefined
Microservices rock: undefined
(base) 
# fxrc @ popos in ~/Downloads [22:44:16] 
$ kubectl get deploy my-app               
NAME     READY   UP-TO-DATE   AVAILABLE   AGE
my-app   2/2     2            2           3m38s
(base) 
# fxrc @ popos in ~/Downloads [22:44:43] 
$ kubectl exec -it my-app-8486b5cf9b-cxdvb sh
kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.
# pwd
/usr/src/app
# ll
sh: 2: ll: not found
# ls
Dockerfile  README.md  package-lock.json  package.json  server.js
# vi server.js
sh: 4: vi: not found
# cat server.js
const favoritefood = process.env.FAVORITE_FOOD;

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function main() {
  while(true) {
    console.log(`Microservices rock: ${favoritefood}`);
    await sleep(5000);
  }
}

main();
# ps aux
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           1  0.1  0.1 589108 29272 ?        Ssl  06:44   0:00 node server.js
root          15  0.0  0.0   4284   756 pts/0    Ss   06:45   0:00 sh
root          24  0.0  0.0  36640  2908 pts/0    R+   06:45   0:00 ps aux
# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
3: eth0@if49: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1450 qdisc noqueue state UP group default 
    link/ether 52:d5:e6:b1:4d:94 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 10.42.0.7/24 brd 10.42.0.255 scope global eth0
       valid_lft forever preferred_lft forever
# exit
(base) 
# fxrc @ popos in ~/Downloads [22:46:06] 
$ kubectl describe po my-app-8486b5cf9b-l42k7 
Name:         my-app-8486b5cf9b-l42k7
Namespace:    default
Priority:     0
Node:         popos/192.168.1.228
Start Time:   Thu, 04 Mar 2021 22:41:06 -0800
Labels:       app=my-app
              pod-template-hash=8486b5cf9b
Annotations:  <none>
Status:       Running
IP:           10.42.0.8
IPs:
  IP:           10.42.0.8
Controlled By:  ReplicaSet/my-app-8486b5cf9b
Containers:
  simple-node:
    Container ID:   docker://959e9e7c25c59de012aafd36e69069f763f64df90e71b4fee97ec95a14bd42a8
    Image:          mathson/simple-node
    Image ID:       docker-pullable://mathson/simple-node@sha256:2b150fa962b2b476ca40a5ab7063ea38654376800ed12fdf29c808eaacee2842
    Port:           80/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Thu, 04 Mar 2021 22:44:02 -0800
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-rwpnw (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-rwpnw:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-rwpnw
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From            Message
  ----    ------     ----   ----            -------
  Normal  Scheduled  5m16s                  Successfully assigned default/my-app-8486b5cf9b-l42k7 to popos
  Normal  Pulling    5m15s  kubelet, popos  Pulling image "mathson/simple-node"
  Normal  Pulled     2m20s  kubelet, popos  Successfully pulled image "mathson/simple-node" in 2m55.480243612s
  Normal  Created    2m20s  kubelet, popos  Created container simple-node
  Normal  Started    2m20s  kubelet, popos  Started container simple-node
(base) 
# fxrc @ popos in ~/Downloads [22:46:25] 



# kubectl delete -f deploy.yaml
# fxrc @ popos in ~ [22:54:35]
$ kubectl describe po my-app-8486b5cf9b-l42k7
Name:                      my-app-8486b5cf9b-l42k7
Namespace:                 default
Priority:                  0
Node:                      popos/192.168.1.228
Start Time:                Thu, 04 Mar 2021 22:41:06 -0800
Labels:                    app=my-app
                           pod-template-hash=8486b5cf9b
Annotations:               <none>
Status:                    Terminating (lasts <invalid>)
Termination Grace Period:  30s
IP:                        10.42.0.8 
IPs:
  IP:           10.42.0.8
Controlled By:  ReplicaSet/my-app-8486b5cf9b
Containers:
  simple-node:
    Container ID:   docker://959e9e7c25c59de012aafd36e69069f763f64df90e71b4fee97ec95a14bd42a8
    Image:          mathson/simple-node
    Image ID:       docker-pullable://mathson/simple-node@sha256:2b150fa962b2b476ca40a5ab7063ea38654376800ed12fdf29c808eaacee2842
    Port:           80/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Thu, 04 Mar 2021 22:44:02 -0800
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-rwpnw (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-rwpnw:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-rwpnw 
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From            Message
  ----    ------     ----  ----            -------
  Normal  Scheduled  13m                   Successfully assigned default/my-app-8486b5cf9b-l42k7 to popos
  Normal  Pulling    13m   kubelet, popos  Pulling image "mathson/simple-node"
  Normal  Pulled     10m   kubelet, popos  Successfully pulled image "mathson/simple-node" in 2m55.480243612s
  Normal  Created    10m   kubelet, popos  Created container simple-node
  Normal  Started    10m   kubelet, popos  Started container simple-node
  Normal  Killing    23s   kubelet, popos  Stopping container simple-node 

# kubectl delete -f service.yaml